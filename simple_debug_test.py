#!/usr/bin/env python3\n\"\"\"\nSimple test to identify BrightData API differences\n\"\"\"\n\nprint(\"üîç IDENTIFYING KEY DIFFERENCES\")\nprint(\"=\" * 50)\n\n# Working independent code parameters\nworking_params = {\n    \"dataset_id\": \"gd_lk5ns7kz21pck8jpis\",\n    \"endpoint\": \"https://api.upsun-deployment-xiwfmii-inhoolfrqniuu.eu-5.platformsh.site/api/brightdata/webhook/\",\n    \"format\": \"json\",\n    \"uncompressed_webhook\": \"true\",\n    \"include_errors\": \"true\",\n    \"type\": \"discover_new\",\n    \"discover_by\": \"url\",\n}\n\n# What your web system likely uses (based on code analysis)\nweb_system_params = {\n    \"dataset_id\": \"LIKELY_DIFFERENT\",  # From database config\n    \"endpoint\": \"http://localhost:8000/api/brightdata/webhook/\",  # Local dev URL!\n    \"auth_header\": \"Bearer your-webhook-secret-token\",  # Extra auth\n    \"notify\": \"http://localhost:8000/api/brightdata/notify/\",  # Extra notify endpoint\n    \"format\": \"json\",\n    \"uncompressed_webhook\": \"true\",\n    \"include_errors\": \"true\",\n    \"type\": \"discover_new\",\n    \"discover_by\": \"url\",\n}\n\nprint(\"SUSPECTED ISSUES:\")\nprint(\"-\" * 30)\nprint(\"1. ‚ùó ENDPOINT URL MISMATCH:\")\nprint(f\"   Working: {working_params['endpoint']}\")\nprint(f\"   Web Sys: {web_system_params['endpoint']}\")\nprint(\"   ‚Üí Your web system likely uses localhost instead of Upsun URL!\")\n\nprint(\"\\n2. ‚ùó EXTRA PARAMETERS:\")\nprint(\"   Web system adds:\")\nprint(f\"   - auth_header: {web_system_params['auth_header']}\")\nprint(f\"   - notify: {web_system_params['notify']}\")\nprint(\"   ‚Üí These extra parameters might cause issues\")\n\nprint(\"\\n3. ‚ùó DATASET ID:\")\nprint(f\"   Working: {working_params['dataset_id']}\")\nprint(f\"   Web Sys: {web_system_params['dataset_id']} (from database)\")\nprint(\"   ‚Üí Dataset ID might be different in your database config\")\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"üéØ RECOMMENDED FIXES:\")\nprint(\"=\" * 50)\n\nprint(\"1. Fix BRIGHTDATA_BASE_URL in production settings\")\nprint(\"   Should be: https://api.upsun-deployment-xiwfmii-inhoolfrqniuu.eu-5.platformsh.site\")\nprint(\"   Currently likely: http://localhost:8000\")\n\nprint(\"\\n2. Check BrightdataConfig in database\")\nprint(\"   Ensure dataset_id matches: gd_lk5ns7kz21pck8jpis\")\nprint(\"   Ensure api_token matches: c20a28d5-5c6c-43c3-9567-a6d7c193e727\")\n\nprint(\"\\n3. Remove or fix auth_header parameter\")\nprint(\"   Working version doesn't use auth_header\")\nprint(\"   Your web system adds this which might break the API call\")\n\nprint(\"\\n4. Remove or fix notify parameter\")\nprint(\"   Working version doesn't use notify endpoint\")\nprint(\"   Your web system adds this which might not be needed\")\n
